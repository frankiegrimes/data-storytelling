!function(t){"use strict";var e=[{label:"Newspapers",count:60},{label:"TV",count:20},{label:"Social Media",count:15},{label:"Film",count:1}],a=360,n=360,r=Math.min(a,n)/2,l=75,i=18,c=4,s=t.scale.category20b(),o=t.select("#chart-1").append("svg").attr("width",a).attr("height",n).append("g").attr("transform","translate("+a/2+","+n/2+")"),d=t.svg.arc().innerRadius(r-l).outerRadius(r),u=t.layout.pie().value(function(t){return t.count}).sort(null),h=t.select("#chart-1").append("div").attr("class","tooltip");h.append("div").attr("class","label"),h.append("div").attr("class","count"),h.append("div").attr("class","percent"),e.forEach(function(t){t.count=+t.count,t.enabled=!0});var f=o.selectAll("path").data(u(e)).enter().append("path").attr("d",d).attr("fill",function(t,e){return s(t.data.label)}).each(function(t){this._current=t});f.on("mouseover",function(a){var n=t.sum(e.map(function(t){return t.enabled?t.count:0})),r=Math.round(1e3*a.data.count/n)/10;h.select(".label").html(a.data.label),h.select(".count").html(a.data.count),h.select(".percent").html(r+"%"),h.style("display","block")}),f.on("mouseout",function(t){h.style("display","none")});var p=o.selectAll(".legend").data(s.domain()).enter().append("g").attr("class","legend").attr("transform",function(t,e){var a=i+c,n=a*s.domain().length/2,r=-2*i,l=e*a-n;return"translate("+r+","+l+")"});p.append("rect").attr("width",i).attr("height",i).style("fill",s).style("stroke",s).on("click",function(a){var n=t.select(this),r=!0,l=t.sum(e.map(function(t){return t.enabled?1:0}));if("disabled"===n.attr("class"))n.attr("class","");else{if(2>l)return;n.attr("class","disabled"),r=!1}u.value(function(t){return t.label===a&&(t.enabled=r),t.enabled?t.count:0}),f=f.data(u(e)),f.transition().duration(750).attrTween("d",function(e){var a=t.interpolate(this._current,e);return this._current=a(0),function(t){return d(a(t))}})}),p.append("text").attr("x",i+c).attr("y",i-c).text(function(t){return t})}(window.d3);var w=500,h=100,barPadding=1,dataset=[5,10,13,19,21,25,22,18,15,13,11,12,15,20,18,17,16,18,23,25],graph2=d3.select("#chart-2").append("svg").attr("width",w).attr("height",h);graph2.selectAll("rect").data(dataset).enter().append("rect").attr("x",function(t,e){return e*(w/dataset.length)}).attr("y",function(t){return h-4*t}).attr("width",w/dataset.length-barPadding).attr("height",function(t){return 4*t}).attr("fill",function(t){return"rgb(0, 0, "+10*t+")"}),graph2.selectAll("text").data(dataset).enter().append("text").text(function(t){return t}).attr("text-anchor","middle").attr("x",function(t,e){return e*(w/dataset.length)+(w/dataset.length-barPadding)/2}).attr("y",function(t){return h-4*t+14}).attr("font-family","sans-serif").attr("font-size","11px").attr("fill","white");var margin={top:20,right:20,bottom:30,left:40},width=960-margin.left-margin.right,height=500-margin.top-margin.bottom,formatPercent=d3.format(".0%"),x=d3.scale.ordinal().rangeRoundBands([0,width],.1,1),y=d3.scale.linear().range([height,0]),xAxis=d3.svg.axis().scale(x).orient("bottom"),yAxis=d3.svg.axis().scale(y).orient("left").tickFormat(formatPercent),svg=d3.select("#chart-3").append("svg").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")");d3.tsv("assets/data/data.tsv",function(t,e){function a(){clearTimeout(n);var t=x.domain(e.sort(this.checked?function(t,e){return e.frequency-t.frequency}:function(t,e){return d3.ascending(t.letter,e.letter)}).map(function(t){return t.letter})).copy();svg.selectAll(".bar").sort(function(e,a){return t(e.letter)-t(a.letter)});var a=svg.transition().duration(750),r=function(t,e){return 50*e};a.selectAll(".bar").delay(r).attr("x",function(e){return t(e.letter)}),a.select(".x.axis").call(xAxis).selectAll("g").delay(r)}e.forEach(function(t){t.frequency=+t.frequency}),x.domain(e.map(function(t){return t.letter})),y.domain([0,d3.max(e,function(t){return t.frequency})]),svg.append("g").attr("class","x axis").attr("transform","translate(0,"+height+")").call(xAxis),svg.append("g").attr("class","y axis").call(yAxis).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Frequency"),svg.selectAll(".bar").data(e).enter().append("rect").attr("class","bar").attr("x",function(t){return x(t.letter)}).attr("width",x.rangeBand()).attr("y",function(t){return y(t.frequency)}).attr("height",function(t){return height-y(t.frequency)}),d3.select("input").on("change",a);var n=setTimeout(function(){d3.select("input").property("checked",!0).each(a)},2e3)});