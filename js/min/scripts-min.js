var dataset=[{label:"Procrastination",count:60},{label:"Fear",count:20},{label:"Feeling The Bern",count:15},{label:"Study",count:1}],width=360,height=360,radius=Math.min(width,height)/2,donutWidth=75,legendRectSize=18,legendSpacing=4,color=d3.scale.category20b(),graph4=d3.select("#chart-1").append("svg").attr("width",width).attr("height",height).append("g").attr("transform","translate("+width/2+","+height/2+")"),arc=d3.svg.arc().innerRadius(radius-donutWidth).outerRadius(radius),pie=d3.layout.pie().value(function(t){return t.count}).sort(null),tooltip=d3.select("#area4").append("div").attr("class","tooltip");tooltip.append("div").attr("class","label"),tooltip.append("div").attr("class","count"),tooltip.append("div").attr("class","percent"),dataset.forEach(function(t){t.count=+t.count,t.enabled=!0});var path=graph4.selectAll("path").data(pie(dataset)).enter().append("path").attr("d",arc).attr("fill",function(t,e){return color(t.data.label)}).each(function(t){this._current=t});path.on("mouseover",function(t){var e=d3.sum(dataset.map(function(t){return t.enabled?t.count:0})),a=Math.round(1e3*t.data.count/e)/10;tooltip.select(".label").html(t.data.label),tooltip.select(".count").html(t.data.count),tooltip.select(".percent").html(a+"%"),tooltip.style("display","block")}),path.on("mouseout",function(t){tooltip.style("display","none")});var legend=graph4.selectAll(".legend").data(color.domain()).enter().append("g").attr("class","legend").attr("transform",function(t,e){var a=legendRectSize+legendSpacing,n=a*color.domain().length/2,r=-2*legendRectSize,l=e*a-n;return"translate("+r+","+l+")"});legend.append("rect").attr("width",legendRectSize).attr("height",legendRectSize).style("fill",color).style("stroke",color).on("click",function(t){var e=d3.select(this),a=!0,n=d3.sum(dataset.map(function(t){return t.enabled?1:0}));if("disabled"===e.attr("class"))e.attr("class","");else{if(2>n)return;e.attr("class","disabled"),a=!1}pie.value(function(e){return e.label===t&&(e.enabled=a),e.enabled?e.count:0}),path=path.data(pie(dataset)),path.transition().duration(750).attrTween("d",function(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return arc(e(t))}})}),legend.append("text").attr("x",legendRectSize+legendSpacing).attr("y",legendRectSize-legendSpacing).text(function(t){return t});var margin={top:40,right:40,bottom:40,left:80},width="%",height="%",padding=1,x=d3.scale.ordinal().domain(flatData.map(xKey)).rangeRoundBands([padding,100-2*padding]),y=d3.scale.linear().domain([0,d3.max(flatData,yKey)]).range([100-2*padding,padding]),xAxis=d3.svg.axis().scale(x).orient("bottom"),yAxis=d3.svg.axis().scale(y).orient("left").ticks(15,"$"),legendRectSize=16,legendSpacing=4,color=d3.scale.category20(),svg=d3.select("#chart-2").append("svg").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")");d3.csv("assets/data/shitlist.csv",function(t,e){e.forEach(function(t){t.count=+t.count,t.enabled=!0}),x.domain(e.map(function(t){return t.label})),y.domain([0,d3.max(e,function(t){return t.count})]),svg.append("g").attr("class","x axis").attr("transform","translate(0,"+height+")").call(xAxis),svg.append("g").attr("class","y axis").call(yAxis).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end"),svg.selectAll(".bar").data(e).enter().append("rect").attr("class","bar").attr("x",function(t){return x(t.label)}).attr("width",x.rangeBand()).attr("y",function(t){return y(t.count)}).attr("height",function(t){return height-y(t.count)}).attr("fill",function(t){return color(t.nation)}).each(function(t){this._current=t});var a=svg.selectAll(".legend").data(color.domain()).enter().append("g").attr("class","legend").attr("transform",function(t,e){var a=legendRectSize+legendSpacing,n=a*color.domain().length/40,r=50*legendRectSize,l=e*a-n;return"translate("+r+","+2*l+")"});a.append("rect").attr("width",legendRectSize).attr("height",legendRectSize).style("fill",color).style("stroke",color).on("click",function(t){var a=d3.select(this),n=!0,r=d3.sum(e.map(function(t){return t.enabled?1:0}));if("disabled"===a.attr("class"))a.attr("class","");else{if(2>r)return;a.attr("class","disabled"),n=!1}path=data(e),a.transition().duration(750).attrTween("d",function(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return arc(e(t))}})}),a.append("text").attr("x",legendRectSize+legendSpacing).attr("y",legendRectSize-legendSpacing).text(function(t){return t})});